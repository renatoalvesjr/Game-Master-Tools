<app-breadcomb [list]="[mapPage?.mapPageName!,mapCanvas?.mapName!]"></app-breadcomb>


<div class="flex flex-col m-4 {{isEmpty ? 'hidden' : ''}} gap-4">
  <div>{{ "page-text.rclick-instruction" | translate }}</div>

  <div id="map" class="h-[80vh]"></div>
  <p-button class="self-center" (click)="onImageSelected()"
            [title]="'button.change-map' | translate"></p-button>
</div>

@if (showContextMenu) {
  <div
    class="absolute w-[200px] z-[1000]"
    [ngStyle]="{ top: contextMenuPosition.y + 'px', left: contextMenuPosition.x + 'px' }"
  >
    <div class="flex flex-col bg-stone-50 p-2 border rounded shadow gap-1 text-black ">
      <div (click)="showPinMenu = !showPinMenu"
           class="flex flex-row justify-between hover:bg-gray-200 p-1 rounded-md">
        <span>{{ "menu-options.add-pin" | translate }}</span>
        <svg-icon src="icons/keyboard_arrow_{{showPinMenu?'down':'right'}}.svg"></svg-icon>
      </div>
      <div class=" {{showPinMenu?'flex':'hidden'}}">
        <div class="flex flex-col w-full ml-4">
          @for (pin of icons; track pin.url) {
            <button class="flex flex-row w-full hover:bg-gray-200 rounded-md text-left text-black p-1 z-50 gap-2"
                    (click)="addPin(pin)">
              <svg-icon src="{{pin.url}}"></svg-icon>
              <span>{{ "pin-colors." + pin.name | translate }}</span>
            </button>
          }
        </div>
      </div>
      <div class="block w-full border-b border-gray-300 my-2"></div>
      <button class="block w-full hover:bg-gray-200 text-left text-black rounded-md py-1 px-2 z-50"
              (click)="closeMenu()">{{ "menu-options.close" | translate }}
      </button>
    </div>
    <!-- você pode adicionar mais opções -->
  </div>
}

@if (showPinContextMenu) {
  <div
    class="fixed w-[200px] z-[1000]"
    [ngStyle]="{ top: contextMenuPosition.y + 'px', left: contextMenuPosition.x + 'px' }"
  >
    <div class="flex flex-col bg-stone-50 p-2 border rounded shadow gap-1 text-black ">
      <div (click)="closeMenu()"
           class="flex flex-row justify-between hover:bg-gray-200 p-1 rounded-md">
        <span class="text-red-700">{{ "menu-options.delete-pin" | translate }}</span>
      </div>
      <div class="block w-full border-b border-gray-300 my-2"></div>
      <button class="block w-full hover:bg-gray-200 text-left text-black rounded-md py-1 px-2 z-50"
              (click)="closeMenu()">{{ "menu-options.close" | translate }}
      </button>
    </div>
  </div>
}

<div class="{{isEmpty?'':'hidden'}}">
  <div class="flex flex-col items-center justify-center h-[80vh]">
    <h2 class="m-4 p-2 font-bold">{{ "page-text.no-map-title" | translate }}</h2>
    <p class="m-2">{{ "page-text.no-map-description" | translate }}</p>
    <p-button (click)="onImageSelected()" [title]="'button.change-map' | translate"></p-button>
  </div>
</div>
<!--<div class="controls">-->
<!--  <button (click)="setIconStyle('red')">-->
<!--    <svg-icon svgClass="" src="icons/red-pin.svg"></svg-icon>-->
<!--  </button>-->
<!--  <button (click)="setIconStyle('blue')">-->
<!--    <svg-icon svgClass="" src="icons/blue-pin.svg"></svg-icon>-->
<!--  </button>-->
<!--  <button (click)="clearPins()">Clear Pins</button>-->
<!--</div>-->
